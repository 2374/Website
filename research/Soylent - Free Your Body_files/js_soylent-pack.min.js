function FastClick(layer,options){"use strict";function bind(method,context){return function(){return method.apply(context,arguments)}}var oldOnClick;if(options=options||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=options.touchBoundary||10,this.layer=layer,this.tapDelay=options.tapDelay||200,!FastClick.notNeeded(layer)){for(var methods=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],context=this,i=0,l=methods.length;l>i;i++)context[methods[i]]=bind(context[methods[i]],context);deviceIsAndroid&&(layer.addEventListener("mouseover",this.onMouse,!0),layer.addEventListener("mousedown",this.onMouse,!0),layer.addEventListener("mouseup",this.onMouse,!0)),layer.addEventListener("click",this.onClick,!0),layer.addEventListener("touchstart",this.onTouchStart,!1),layer.addEventListener("touchmove",this.onTouchMove,!1),layer.addEventListener("touchend",this.onTouchEnd,!1),layer.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;"click"===type?rmv.call(layer,type,callback.hijacked||callback,capture):rmv.call(layer,type,callback,capture)},layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;"click"===type?adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){event.propagationStopped||callback(event)}),capture):adv.call(layer,type,callback,capture)}),"function"==typeof layer.onclick&&(oldOnClick=layer.onclick,layer.addEventListener("click",function(event){oldOnClick(event)},!1),layer.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===target.type||target.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(target.className)},FastClick.prototype.needsFocus=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}},FastClick.prototype.sendClick=function(targetElement,event){"use strict";var clickEvent,touch;document.activeElement&&document.activeElement!==targetElement&&document.activeElement.blur(),touch=event.changedTouches[0],clickEvent=document.createEvent("MouseEvents"),clickEvent.initMouseEvent(this.determineEventType(targetElement),!0,!0,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,!1,!1,!1,!1,0,null),clickEvent.forwardedTouchEvent=!0,targetElement.dispatchEvent(clickEvent)},FastClick.prototype.determineEventType=function(targetElement){"use strict";return deviceIsAndroid&&"select"===targetElement.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(targetElement){"use strict";var length;deviceIsIOS&&targetElement.setSelectionRange&&0!==targetElement.type.indexOf("date")&&"time"!==targetElement.type?(length=targetElement.value.length,targetElement.setSelectionRange(length,length)):targetElement.focus()},FastClick.prototype.updateScrollParent=function(targetElement){"use strict";var scrollParent,parentElement;if(scrollParent=targetElement.fastClickScrollParent,!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement,targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}scrollParent&&(scrollParent.fastClickLastScrollTop=scrollParent.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){"use strict";return eventTarget.nodeType===Node.TEXT_NODE?eventTarget.parentNode:eventTarget},FastClick.prototype.onTouchStart=function(event){"use strict";var targetElement,touch,selection;if(event.targetTouches.length>1)return!0;if(targetElement=this.getTargetElementFromEventTarget(event.target),touch=event.targetTouches[0],deviceIsIOS){if(selection=window.getSelection(),selection.rangeCount&&!selection.isCollapsed)return!0;if(!deviceIsIOS4){if(touch.identifier===this.lastTouchIdentifier)return event.preventDefault(),!1;this.lastTouchIdentifier=touch.identifier,this.updateScrollParent(targetElement)}}return this.trackingClick=!0,this.trackingClickStart=event.timeStamp,this.targetElement=targetElement,this.touchStartX=touch.pageX,this.touchStartY=touch.pageY,event.timeStamp-this.lastClickTime<this.tapDelay&&event.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(event){"use strict";var touch=event.changedTouches[0],boundary=this.touchBoundary;return Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary?!0:!1},FastClick.prototype.onTouchMove=function(event){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(labelElement){"use strict";return void 0!==labelElement.control?labelElement.control:labelElement.htmlFor?document.getElementById(labelElement.htmlFor):labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(event){"use strict";var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick)return!0;if(event.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=event.timeStamp,trackingClickStart=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(touch=event.changedTouches[0],targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement,targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent),targetTagName=targetElement.tagName.toLowerCase(),"label"===targetTagName){if(forElement=this.findControl(targetElement)){if(this.focus(targetElement),deviceIsAndroid)return!1;targetElement=forElement}}else if(this.needsFocus(targetElement))return event.timeStamp-trackingClickStart>100||deviceIsIOS&&window.top!==window&&"input"===targetTagName?(this.targetElement=null,!1):(this.focus(targetElement),this.sendClick(targetElement,event),deviceIsIOS&&"select"===targetTagName||(this.targetElement=null,event.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(scrollParent=targetElement.fastClickScrollParent,scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop)?!0:(this.needsClick(targetElement)||(event.preventDefault(),this.sendClick(targetElement,event)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(event){"use strict";return this.targetElement?event.forwardedTouchEvent?!0:event.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(event.stopImmediatePropagation?event.stopImmediatePropagation():event.propagationStopped=!0,event.stopPropagation(),event.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(event){"use strict";var permitted;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===event.target.type&&0===event.detail?!0:(permitted=this.onMouse(event),permitted||(this.targetElement=null),permitted)},FastClick.prototype.destroy=function(){"use strict";var layer=this.layer;deviceIsAndroid&&(layer.removeEventListener("mouseover",this.onMouse,!0),layer.removeEventListener("mousedown",this.onMouse,!0),layer.removeEventListener("mouseup",this.onMouse,!0)),layer.removeEventListener("click",this.onClick,!0),layer.removeEventListener("touchstart",this.onTouchStart,!1),layer.removeEventListener("touchmove",this.onTouchMove,!1),layer.removeEventListener("touchend",this.onTouchEnd,!1),layer.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(layer){"use strict";var metaViewport,chromeVersion;if("undefined"==typeof window.ontouchstart)return!0;if(chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(metaViewport=document.querySelector("meta[name=viewport]")){if(-1!==metaViewport.content.indexOf("user-scalable=no"))return!0;if(chromeVersion>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}return"none"===layer.style.msTouchAction?!0:!1},FastClick.attach=function(layer,options){"use strict";return new FastClick(layer,options)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(){function $(expr,con){return[].slice.call((con||document).querySelectorAll(expr))}if(window.addEventListener){var self=window.StyleFix={link:function(link){try{if("stylesheet"!==link.rel||link.hasAttribute("data-noprefix"))return}catch(e){return}var process,url=link.href||link.getAttribute("data-href"),base=url.replace(/[^\/]+$/,""),base_scheme=(/^[a-z]{3,10}:/.exec(base)||[""])[0],base_domain=(/^[a-z]{3,10}:\/\/[^\/]+/.exec(base)||[""])[0],base_query=/^([^?]*)\??/.exec(url)[1],parent=link.parentNode,xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){4===xhr.readyState&&process()},process=function(){var css=xhr.responseText;if(css&&link.parentNode&&(!xhr.status||xhr.status<400||xhr.status>600)){if(css=self.fix(css,!0,link),base){css=css.replace(/url\(\s*?((?:"|')?)(.+?)\1\s*?\)/gi,function($0,quote,url){return/^([a-z]{3,10}:|#)/i.test(url)?$0:/^\/\//.test(url)?'url("'+base_scheme+url+'")':/^\//.test(url)?'url("'+base_domain+url+'")':/^\?/.test(url)?'url("'+base_query+url+'")':'url("'+base+url+'")'});var escaped_base=base.replace(/([\\\^\$*+[\]?{}.=!:(|)])/g,"\\$1");css=css.replace(RegExp("\\b(behavior:\\s*?url\\('?\"?)"+escaped_base,"gi"),"$1")}var style=document.createElement("style");style.textContent=css,style.media=link.media,style.disabled=link.disabled,style.setAttribute("data-href",link.getAttribute("href")),parent.insertBefore(style,link),parent.removeChild(link),style.media=link.media}};try{xhr.open("GET",url),xhr.send(null)}catch(e){"undefined"!=typeof XDomainRequest&&(xhr=new XDomainRequest,xhr.onerror=xhr.onprogress=function(){},xhr.onload=process,xhr.open("GET",url),xhr.send(null))}link.setAttribute("data-inprogress","")},styleElement:function(style){if(!style.hasAttribute("data-noprefix")){var disabled=style.disabled;style.textContent=self.fix(style.textContent,!0,style),style.disabled=disabled}},styleAttribute:function(element){var css=element.getAttribute("style");css=self.fix(css,!1,element),element.setAttribute("style",css)},process:function(){$('link[rel="stylesheet"]:not([data-inprogress])').forEach(StyleFix.link),$("style").forEach(StyleFix.styleElement),$("[style]").forEach(StyleFix.styleAttribute)},register:function(fixer,index){(self.fixers=self.fixers||[]).splice(void 0===index?self.fixers.length:index,0,fixer)},fix:function(css,raw,element){for(var i=0;i<self.fixers.length;i++)css=self.fixers[i](css,raw,element)||css;return css},camelCase:function(str){return str.replace(/-([a-z])/g,function($0,$1){return $1.toUpperCase()}).replace("-","")},deCamelCase:function(str){return str.replace(/[A-Z]/g,function($0){return"-"+$0.toLowerCase()})}};!function(){setTimeout(function(){$('link[rel="stylesheet"]').forEach(StyleFix.link)},10),document.addEventListener("DOMContentLoaded",StyleFix.process,!1)}()}}(),function(root){function fix(what,before,after,replacement,css){if(what=self[what],what.length){var regex=RegExp(before+"("+what.join("|")+")"+after,"gi");css=css.replace(regex,replacement)}return css}if(window.StyleFix&&window.getComputedStyle){var self=window.PrefixFree={prefixCSS:function(css,raw){var prefix=self.prefix;if(self.functions.indexOf("linear-gradient")>-1&&(css=css.replace(/(\s|:|,)(repeating-)?linear-gradient\(\s*(-?\d*\.?\d*)deg/gi,function($0,delim,repeating,deg){return delim+(repeating||"")+"linear-gradient("+(90-deg)+"deg"})),css=fix("functions","(\\s|:|,)","\\s*\\(","$1"+prefix+"$2(",css),css=fix("keywords","(\\s|:)","(\\s|;|\\}|$)","$1"+prefix+"$2$3",css),css=fix("properties","(^|\\{|\\s|;)","\\s*:","$1"+prefix+"$2:",css),self.properties.length){var regex=RegExp("\\b("+self.properties.join("|")+")(?!:)","gi");css=fix("valueProperties","\\b",":(.+?);",function($0){return $0.replace(regex,prefix+"$1")},css)}return raw&&(css=fix("selectors","","\\b",self.prefixSelector,css),css=fix("atrules","@","\\b","@"+prefix+"$1",css)),css=css.replace(RegExp("-"+prefix,"g"),"-"),css=css.replace(/-\*-(?=[a-z]+)/gi,self.prefix)},property:function(property){return(self.properties.indexOf(property)>=0?self.prefix:"")+property},value:function(value,property){return value=fix("functions","(^|\\s|,)","\\s*\\(","$1"+self.prefix+"$2(",value),value=fix("keywords","(^|\\s)","(\\s|$)","$1"+self.prefix+"$2$3",value),self.valueProperties.indexOf(property)>=0&&(value=fix("properties","(^|\\s|,)","($|\\s|,)","$1"+self.prefix+"$2$3",value)),value},prefixSelector:function(selector){return selector.replace(/^:{1,2}/,function($0){return $0+self.prefix})},prefixProperty:function(property,camelCase){var prefixed=self.prefix+property;return camelCase?StyleFix.camelCase(prefixed):prefixed}};!function(){var prefixes={},properties=[],style=getComputedStyle(document.documentElement,null),dummy=document.createElement("div").style,iterate=function(property){if("-"===property.charAt(0)){properties.push(property);var parts=property.split("-"),prefix=parts[1];for(prefixes[prefix]=++prefixes[prefix]||1;parts.length>3;){parts.pop();var shorthand=parts.join("-");supported(shorthand)&&-1===properties.indexOf(shorthand)&&properties.push(shorthand)}}},supported=function(property){return StyleFix.camelCase(property)in dummy};if(style.length>0)for(var i=0;i<style.length;i++)iterate(style[i]);else for(var property in style)iterate(StyleFix.deCamelCase(property));var highest={uses:0};for(var prefix in prefixes){var uses=prefixes[prefix];highest.uses<uses&&(highest={prefix:prefix,uses:uses})}self.prefix="-"+highest.prefix+"-",self.Prefix=StyleFix.camelCase(self.prefix),self.properties=[];for(var i=0;i<properties.length;i++){var property=properties[i];if(0===property.indexOf(self.prefix)){var unprefixed=property.slice(self.prefix.length);supported(unprefixed)||self.properties.push(unprefixed)}}"Ms"!=self.Prefix||"transform"in dummy||"MsTransform"in dummy||!("msTransform"in dummy)||self.properties.push("transform","transform-origin"),self.properties.sort()}(),function(){function supported(value,property){return style[property]="",style[property]=value,!!style[property]}var functions={"linear-gradient":{property:"backgroundImage",params:"red, teal"},calc:{property:"width",params:"1px + 5%"},element:{property:"backgroundImage",params:"#foo"},"cross-fade":{property:"backgroundImage",params:"url(a.png), url(b.png), 50%"}};functions["repeating-linear-gradient"]=functions["repeating-radial-gradient"]=functions["radial-gradient"]=functions["linear-gradient"];var keywords={initial:"color","zoom-in":"cursor","zoom-out":"cursor",box:"display",flexbox:"display","inline-flexbox":"display",flex:"display","inline-flex":"display",grid:"display","inline-grid":"display","min-content":"width"};self.functions=[],self.keywords=[];var style=document.createElement("div").style;for(var func in functions){var test=functions[func],property=test.property,value=func+"("+test.params+")";!supported(value,property)&&supported(self.prefix+value,property)&&self.functions.push(func)}for(var keyword in keywords){var property=keywords[keyword];!supported(keyword,property)&&supported(self.prefix+keyword,property)&&self.keywords.push(keyword)}}(),function(){function supported(selector){return style.textContent=selector+"{}",!!style.sheet.cssRules.length}var selectors={":read-only":null,":read-write":null,":any-link":null,"::selection":null},atrules={keyframes:"name",viewport:null,document:'regexp(".")'};self.selectors=[],self.atrules=[];var style=root.appendChild(document.createElement("style"));for(var selector in selectors){var test=selector+(selectors[selector]?"("+selectors[selector]+")":"");!supported(test)&&supported(self.prefixSelector(test))&&self.selectors.push(selector)}for(var atrule in atrules){var test=atrule+" "+(atrules[atrule]||"");!supported("@"+test)&&supported("@"+self.prefix+test)&&self.atrules.push(atrule)}root.removeChild(style)}(),self.valueProperties=["transition","transition-property"],root.className+=" "+self.prefix,StyleFix.register(self.prefixCSS)}}(document.documentElement),function($){"use strict";function px(n){return-1==n.toString().indexOf("px")?n+"px":n}var hasCssTransitions;$.okgallery=function(el,options){var base=this;if(base.$el=$(el),base.el=el,!base.$el.data("okgallery")){base.$el.data("okgallery",base),base.$children=base.$el.children("div");var current=-1;base.init=function(){base.options=$.extend({},$.okgallery.options,options),base.build()},base.build=function(){null!=base.options.width&&null!=base.options.height&&base.options.height>0&&(base.options.aspect=base.options.width/base.options.height),base.options.useTransitions?base.$children.css("opacity",0):(base.$children.first().addClass("present"),base.$children.not(":first-child").addClass("future")),base.resize(),base.buildCss(),base.buildDots(),base.bindArrows(),setTimeout(base.buildTransitions),base.options.autoplayOnHover?base.$el.hover(function(){base.autoplayOn(),base.autoplayTimeout=setTimeout(base.next,750)},function(){base.autoplayOff(),base.first()}):base.$el.bind("click",base.clickNext),$(window).resize(base.debounceResize),base.start()},base.bindArrows=function(){null!=base.options.prevSelector&&$(base.options.prevSelector).click(base.clickPrev),null!=base.options.nextSelector&&$(base.options.nextSelector).click(base.clickNext),base.options.useKeyboard&&$(window).keydown(function(e){37==e.keyCode?base.prev():39==e.keyCode&&base.next()})},base.buildCss=function(){base.$el.css({width:"100%",position:"relative",overflow:"hidden",cursor:"pointer",WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",OUserSelect:"none",userSelect:"none"}),base.$children.css({position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundSize:base.options.backgroundSize,backgroundPosition:base.options.backgroundPosition,backgroundRepeat:base.options.backgroundRepeat,WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",OUserSelect:"none",userSelect:"none"}),"fullscreen"==base.options.aspect&&(base.$el.css({height:"100%",position:"fixed",top:"0",left:"0"}),$("html,body").css({width:"100%",height:"100%",margin:0,"overflow-x":"hidden"})),0==base.options.aspect&&base.$el.css({width:""}),base.options.center&&(base.$children.css({width:"",height:"",left:"50%",top:"50%"}),base.$children.each(function(){$(this).css({"margin-left":$(this).width()/-2,"margin-top":$(this).height()/-2})}))},base.buildTransitions=function(){if(hasCssTransitions&&base.options.useTransitions){var transition={};transition[hasCssTransitions+"Property"]="all",transition[hasCssTransitions+"Duration"]=base.options.resizeTime/1e3+"s",base.$el.css(transition);var fadeTransition={};fadeTransition[hasCssTransitions+"Property"]="opacity",fadeTransition[hasCssTransitions+"Duration"]=base.options.fadeTime/1e3+"s",fadeTransition[hasCssTransitions+"TimingFunction"]=base.options.fadeTimingFunction,base.$children.css(fadeTransition)}},base.buildDots=function(){if(base.options.dots){var width=px(base.options.dotWidth),margin=px(base.options.dotMargin),shadow="0 0 ";shadow+=px(base.options.dotShadowWidth),shadow+=" "+base.options.dotShadowColor,base.$dotParent=$("<div/>").addClass("dots").css({width:"100%",paddingTop:base.options.dotContainerPadding,paddingBottom:base.options.dotContainerPadding,textAlign:"center",WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",OUserSelect:"none",userSelect:"none"}),base.$children.each(function(index){var $dot=$("<a/>");$dot.data("index",index),$dot.click(base.clickDot),base.options.dotClass?$dot.addClass(base.options.dotClass):$dot.addClass("dot").css({cursor:"pointer",display:"inline-block",margin:margin,backgroundColor:base.options.dotColor,width:width,height:width,borderRadius:width,WebkitBorderRadius:width,MozBorderRadius:width,MsBorderRadius:width,OBorderRadius:width,boxShadow:shadow,WebkitBoxShadow:shadow,MozBoxShadow:shadow,MsBoxShadow:shadow,OBoxShadow:shadow}),base.$dotParent.append($dot)}),base.options.dotsInside?(base.$el.append(base.$dotParent),base.$dotParent.css({position:"absolute",bottom:0,left:0,zIndex:1})):base.$dotParent.insertAfter(base.$el),base.$dots=base.$dotParent.children()}},base.start=function(){base.next()},base.rand=function(n,a){for(var m=n;m==n;)m=Math.floor(Math.random()*a);return m},base.clickDot=function(e){e.preventDefault(),e.stopPropagation();var index=$(this).data("index");return base.show(index,1),!1},base.autoplayOn=function(){base.options.autoplay=!0},base.autoplayOff=function(){base.autoplayTimeout&&clearTimeout(base.autoplayTimeout),base.options.autoplay=!1},base.clickPrev=function(){base.options.clickDisablesAutoplay&&(base.options.autoplay=!1,clearTimeout(base.autoplayTimeout)),base.options.clickDisablesRandom&&(base.options.random=!1),base.prev()},base.clickNext=function(){base.options.clickDisablesAutoplay&&(base.options.autoplay=!1,clearTimeout(base.autoplayTimeout)),base.options.clickDisablesRandom&&(base.options.random=!1),base.next()},base.first=function(){base.options.random?base.show(base.rand(current,base.$children.length),1):base.show(0,1)},base.next=function(){base.options.random?base.show(base.rand(current,base.$children.length),1):base.show(current+1,1)},base.prev=function(){base.show(current-1,-1)},base.show=function(index,direction){index=(index+base.$children.length)%base.$children.length,index!=current&&(base.options.useTransitions?base.showTransition(index,direction):base.showClass(index,direction)),base.options.dots&&(base.options.dotActiveClass?(base.$dots.removeClass(base.options.dotActiveClass),base.$dots.eq(index).addClass(base.options.dotActiveClass)):(base.$dots.css("background-color",base.options.dotColor),base.$dots.eq(index).css("background-color",base.options.dotActiveColor))),current=index},base.showClass=function(index,direction){{var $index=base.$children.eq(index),$current=base.$children.eq(current),$next=base.$children.eq((index+base.$children.length+direction)%base.$children.length);base.$children.eq((index+base.$children.length-direction)%base.$children.length),base.$children.last().is($index)}1==direction?($current.removeClass("present").css("z-index","-1"),$index.removeClass("future past").addClass("present").css("z-index","auto"),$next.hide().addClass("future").removeClass("past"),setTimeout(function(){$next.show()},100),setTimeout(function(){$current.hide().removeClass("future").addClass("past").css("z-index","auto"),setTimeout(function(){$current.show()},300)},700)):($current.removeClass("present").css("z-index","-1"),$index.removeClass("past future").addClass("present").css("z-index","auto"),$next.hide().addClass("past").removeClass("future"),setTimeout(function(){$next.show()},100),setTimeout(function(){$current.hide().removeClass("past").addClass("future").css("z-index","auto"),setTimeout(function(){$current.show()},300)},700)),setTimeout(function(){base.options.autoplay&&(base.autoplayTimeout&&clearTimeout(base.autoplayTimeout),base.autoplayTimeout=setTimeout(base.next,base.options.fadeTime+base.options.delayTime))},base.options.fadePauseTime),base.options.onchange&&base.options.onchange(index)},base.showTransition=function(index){if(current>-1){var $current=base.$children.eq(current);$current.css("z-index",0).css("opacity",0),setTimeout(function(){$current.hide()},1.5*base.options.fadeTime)}var $index=base.$children.eq(index);$index.css("opacity",0).show(),$index.css("z-index",1),$index.parent().find(".active").removeClass("active"),$index.addClass("active"),setTimeout(function(){$index.css("opacity",1),base.options.autoplay&&(base.autoplayTimeout&&clearTimeout(base.autoplayTimeout),base.autoplayTimeout=setTimeout(base.next,base.options.fadeTime+base.options.delayTime)),base.options.onchange&&base.options.onchange(index)},base.options.fadePauseTime)},base.autoplayTimeout=null,base.debounceTimeout=null,base.debounceResize=function(){base.debounceTimeout&&clearTimeout(base.debounceTimeout),base.debounceTimeout=setTimeout(base.resize,100)},base.resize=function(){"fullscreen"!=base.options.aspect&&0!=base.options.aspect&&(base.el.style.height=Math.floor(base.$el.width()/base.options.aspect)+"px")},base.init()}},hasCssTransitions=function(){var p,ext,div=document.createElement("div"),pre=["msTransition","OTransition","WebkitTransition","MozTransition","transition"];for(p in pre)if(void 0!==div.style[pre[p]]){ext=pre[p];break}return ext}(),$.okgallery.options={aspect:16/9,center:!1,width:null,height:null,random:!1,autoplay:!1,autoplayOnHover:!1,prevSelector:null,nextSelector:null,clickDisablesRandom:!0,clickDisablesAutoplay:!0,resizeTime:200,delayTime:2e3,fadeTime:700,fadePauseTime:0,fadeTimingFunction:"ease",backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",dots:!0,dotsInside:!1,dotClass:null,dotActiveClass:null,dotWidth:14,dotMargin:4,dotContainerPadding:10,dotColor:"#eee",dotShadowColor:"#888",dotShadowWidth:2,dotActiveColor:"yellow",useKeyboard:!1,useTransitions:!0,images:null,onchange:function(){}},$.fn.okgallery=function(options){return this.each(function(){new $.okgallery(this,options)})}}(jQuery),function(){var Util,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Util=function(){function Util(){}return Util.prototype.extend=function(custom,defaults){var key,value;for(key in custom)value=custom[key],null!=value&&(defaults[key]=value);return defaults},Util.prototype.isMobile=function(agent){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(agent)},Util}(),this.WOW=function(){function WOW(options){null==options&&(options={}),this.scrollCallback=__bind(this.scrollCallback,this),this.scrollHandler=__bind(this.scrollHandler,this),this.start=__bind(this.start,this),this.scrolled=!0,console.log(options),this.config=this.util().extend(options,this.defaults)}return WOW.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0},WOW.prototype.init=function(){var _ref;return this.element=window.document.documentElement,"interactive"===(_ref=document.readyState)||"complete"===_ref?this.start():document.addEventListener("DOMContentLoaded",this.start)},WOW.prototype.start=function(){var box,_i,_len,_ref;if(this.boxes=this.element.getElementsByClassName(this.config.boxClass),this.boxes.length){if(this.disabled())return this.resetStyle();for(_ref=this.boxes,_i=0,_len=_ref.length;_len>_i;_i++)box=_ref[_i],this.applyStyle(box,!0);return window.addEventListener("scroll",this.scrollHandler,!1),window.addEventListener("resize",this.scrollHandler,!1),this.interval=setInterval(this.scrollCallback,50)}},WOW.prototype.stop=function(){return window.removeEventListener("scroll",this.scrollHandler,!1),window.removeEventListener("resize",this.scrollHandler,!1),null!=this.interval?clearInterval(this.interval):void 0},WOW.prototype.show=function(box){return this.applyStyle(box),box.className=""+box.className+" "+this.config.animateClass},WOW.prototype.applyStyle=function(box,hidden){var delay,duration,iteration;return duration=box.getAttribute("data-wow-duration"),delay=box.getAttribute("data-wow-delay"),iteration=box.getAttribute("data-wow-iteration"),box.setAttribute("style",this.customStyle(hidden,duration,delay,iteration))},WOW.prototype.resetStyle=function(){var box,_i,_len,_ref,_results;for(_ref=this.boxes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)box=_ref[_i],_results.push(box.setAttribute("style","visibility: visible;"));return _results},WOW.prototype.customStyle=function(hidden,duration,delay,iteration){var style;return style=hidden?"visibility: hidden; -webkit-animation-name: none; -moz-animation-name: none; animation-name: none;":"visibility: visible;",duration&&(style+="-webkit-animation-duration: "+duration+"; -moz-animation-duration: "+duration+"; animation-duration: "+duration+";"),delay&&(style+="-webkit-animation-delay: "+delay+"; -moz-animation-delay: "+delay+"; animation-delay: "+delay+";"),iteration&&(style+="-webkit-animation-iteration-count: "+iteration+"; -moz-animation-iteration-count: "+iteration+"; animation-iteration-count: "+iteration+";"),style},WOW.prototype.scrollHandler=function(){return this.scrolled=!0},WOW.prototype.scrollCallback=function(){var box;return this.scrolled&&(this.scrolled=!1,this.boxes=function(){var _i,_len,_ref,_results;for(_ref=this.boxes,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)box=_ref[_i],box&&(this.isVisible(box)?this.show(box):_results.push(box));return _results}.call(this),!this.boxes.length)?this.stop():void 0},WOW.prototype.offsetTop=function(element){var top;for(top=element.offsetTop;element=element.offsetParent;)top+=element.offsetTop;return top},WOW.prototype.isVisible=function(box){var bottom,offset,top,viewBottom,viewTop;return offset=box.getAttribute("data-wow-offset")||this.config.offset,viewTop=window.pageYOffset,viewBottom=viewTop+this.element.clientHeight-offset,top=this.offsetTop(box),bottom=top+box.clientHeight,viewBottom>=top&&bottom>=viewTop},WOW.prototype.util=function(){return this._util||(this._util=new Util)},WOW.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},WOW}()}.call(this),function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):factory("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function($){"use strict";function doAjaxSubmit(e){var options=e.data;e.isDefaultPrevented()||(e.preventDefault(),$(e.target).ajaxSubmit(options))}function captureSubmittingElement(e){var target=e.target,$el=$(target);if(!$el.is("[type=submit],[type=image]")){var t=$el.closest("[type=submit]");if(0===t.length)return;target=t[0]}var form=this;if(form.clk=target,"image"==target.type)if(void 0!==e.offsetX)form.clk_x=e.offsetX,form.clk_y=e.offsetY;else if("function"==typeof $.fn.offset){var offset=$el.offset();form.clk_x=e.pageX-offset.left,form.clk_y=e.pageY-offset.top}else form.clk_x=e.pageX-target.offsetLeft,form.clk_y=e.pageY-target.offsetTop;setTimeout(function(){form.clk=form.clk_x=form.clk_y=null},100)}function log(){if($.fn.ajaxSubmit.debug){var msg="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(msg):window.opera&&window.opera.postError&&window.opera.postError(msg)}}var feature={};feature.fileapi=void 0!==$("<input type='file'/>").get(0).files,feature.formdata=void 0!==window.FormData;var hasProp=!!$.fn.prop;$.fn.attr2=function(){if(!hasProp)return this.attr.apply(this,arguments);var val=this.prop.apply(this,arguments);return val&&val.jquery||"string"==typeof val?val:this.attr.apply(this,arguments)},$.fn.ajaxSubmit=function(options){function deepSerialize(extraData){var i,part,serialized=$.param(extraData,options.traditional).split("&"),len=serialized.length,result=[];
for(i=0;len>i;i++)serialized[i]=serialized[i].replace(/\+/g," "),part=serialized[i].split("="),result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);return result}function fileUploadXhr(a){for(var formdata=new FormData,i=0;i<a.length;i++)formdata.append(a[i].name,a[i].value);if(options.extraData){var serializedData=deepSerialize(options.extraData);for(i=0;i<serializedData.length;i++)serializedData[i]&&formdata.append(serializedData[i][0],serializedData[i][1])}options.data=null;var s=$.extend(!0,{},$.ajaxSettings,options,{contentType:!1,processData:!1,cache:!1,type:method||"POST"});options.uploadProgress&&(s.xhr=function(){var xhr=$.ajaxSettings.xhr();return xhr.upload&&xhr.upload.addEventListener("progress",function(event){var percent=0,position=event.loaded||event.position,total=event.total;event.lengthComputable&&(percent=Math.ceil(position/total*100)),options.uploadProgress(event,position,total,percent)},!1),xhr}),s.data=null;var beforeSend=s.beforeSend;return s.beforeSend=function(xhr,o){o.data=options.formData?options.formData:formdata,beforeSend&&beforeSend.call(this,xhr,o)},$.ajax(s)}function fileUploadIframe(a){function getDoc(frame){var doc=null;try{frame.contentWindow&&(doc=frame.contentWindow.document)}catch(err){log("cannot get iframe.contentWindow document: "+err)}if(doc)return doc;try{doc=frame.contentDocument?frame.contentDocument:frame.document}catch(err){log("cannot get iframe.contentDocument: "+err),doc=frame.document}return doc}function doSubmit(){function checkState(){try{var state=getDoc(io).readyState;log("state = "+state),state&&"uninitialized"==state.toLowerCase()&&setTimeout(checkState,50)}catch(e){log("Server abort: ",e," (",e.name,")"),cb(SERVER_ABORT),timeoutHandle&&clearTimeout(timeoutHandle),timeoutHandle=void 0}}var t=$form.attr2("target"),a=$form.attr2("action"),mp="multipart/form-data",et=$form.attr("enctype")||$form.attr("encoding")||mp;form.setAttribute("target",id),(!method||/post/i.test(method))&&form.setAttribute("method","POST"),a!=s.url&&form.setAttribute("action",s.url),s.skipEncodingOverride||method&&!/post/i.test(method)||$form.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&(timeoutHandle=setTimeout(function(){timedOut=!0,cb(CLIENT_TIMEOUT_ABORT)},s.timeout));var extraInputs=[];try{if(s.extraData)for(var n in s.extraData)s.extraData.hasOwnProperty(n)&&extraInputs.push($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty("name")&&s.extraData[n].hasOwnProperty("value")?$('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]:$('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]);s.iframeTarget||$io.appendTo("body"),io.attachEvent?io.attachEvent("onload",cb):io.addEventListener("load",cb,!1),setTimeout(checkState,15);try{form.submit()}catch(err){var submitFn=document.createElement("form").submit;submitFn.apply(form)}}finally{form.setAttribute("action",a),form.setAttribute("enctype",et),t?form.setAttribute("target",t):$form.removeAttr("target"),$(extraInputs).remove()}}function cb(e){if(!xhr.aborted&&!callbackProcessed){if(doc=getDoc(io),doc||(log("cannot access response document"),e=SERVER_ABORT),e===CLIENT_TIMEOUT_ABORT&&xhr)return xhr.abort("timeout"),void deferred.reject(xhr,"timeout");if(e==SERVER_ABORT&&xhr)return xhr.abort("server abort"),void deferred.reject(xhr,"error","server abort");if(doc&&doc.location.href!=s.iframeSrc||timedOut){io.detachEvent?io.detachEvent("onload",cb):io.removeEventListener("load",cb,!1);var errMsg,status="success";try{if(timedOut)throw"timeout";var isXml="xml"==s.dataType||doc.XMLDocument||$.isXMLDoc(doc);if(log("isXml="+isXml),!isXml&&window.opera&&(null===doc.body||!doc.body.innerHTML)&&--domCheckCount)return log("requeing onLoad callback, DOM not available"),void setTimeout(cb,250);var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null,xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc,isXml&&(s.dataType="xml"),xhr.getResponseHeader=function(header){var headers={"content-type":s.dataType};return headers[header.toLowerCase()]},docRoot&&(xhr.status=Number(docRoot.getAttribute("status"))||xhr.status,xhr.statusText=docRoot.getAttribute("statusText")||xhr.statusText);var dt=(s.dataType||"").toLowerCase(),scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName("textarea")[0];if(ta)xhr.responseText=ta.value,xhr.status=Number(ta.getAttribute("status"))||xhr.status,xhr.statusText=ta.getAttribute("statusText")||xhr.statusText;else if(scr){var pre=doc.getElementsByTagName("pre")[0],b=doc.getElementsByTagName("body")[0];pre?xhr.responseText=pre.textContent?pre.textContent:pre.innerText:b&&(xhr.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"==dt&&!xhr.responseXML&&xhr.responseText&&(xhr.responseXML=toXml(xhr.responseText));try{data=httpData(xhr,dt,s)}catch(err){status="parsererror",xhr.error=errMsg=err||status}}catch(err){log("error caught: ",err),status="error",xhr.error=errMsg=err||status}xhr.aborted&&(log("upload aborted"),status=null),xhr.status&&(status=xhr.status>=200&&xhr.status<300||304===xhr.status?"success":"error"),"success"===status?(s.success&&s.success.call(s.context,data,"success",xhr),deferred.resolve(xhr.responseText,"success",xhr),g&&$.event.trigger("ajaxSuccess",[xhr,s])):status&&(void 0===errMsg&&(errMsg=xhr.statusText),s.error&&s.error.call(s.context,xhr,status,errMsg),deferred.reject(xhr,"error",errMsg),g&&$.event.trigger("ajaxError",[xhr,s,errMsg])),g&&$.event.trigger("ajaxComplete",[xhr,s]),g&&!--$.active&&$.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,xhr,status),callbackProcessed=!0,s.timeout&&clearTimeout(timeoutHandle),setTimeout(function(){s.iframeTarget?$io.attr("src",s.iframeSrc):$io.remove(),xhr.responseXML=null},100)}}}var el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle,form=$form[0],deferred=$.Deferred();if(deferred.abort=function(status){xhr.abort(status)},a)for(i=0;i<elements.length;i++)el=$(elements[i]),hasProp?el.prop("disabled",!1):el.removeAttr("disabled");if(s=$.extend(!0,{},$.ajaxSettings,options),s.context=s.context||s,id="jqFormIO"+(new Date).getTime(),s.iframeTarget?($io=$(s.iframeTarget),n=$io.attr2("name"),n?id=n:$io.attr2("name",id)):($io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />'),$io.css({position:"absolute",top:"-1000px",left:"-1000px"})),io=$io[0],xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e="timeout"===status?"timeout":"aborted";log("aborting upload... "+e),this.aborted=1;try{io.contentWindow.document.execCommand&&io.contentWindow.document.execCommand("Stop")}catch(ignore){}$io.attr("src",s.iframeSrc),xhr.error=e,s.error&&s.error.call(s.context,xhr,e,status),g&&$.event.trigger("ajaxError",[xhr,s,e]),s.complete&&s.complete.call(s.context,xhr,e)}},g=s.global,g&&0===$.active++&&$.event.trigger("ajaxStart"),g&&$.event.trigger("ajaxSend",[xhr,s]),s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===!1)return s.global&&$.active--,deferred.reject(),deferred;if(xhr.aborted)return deferred.reject(),deferred;sub=form.clk,sub&&(n=sub.name,n&&!sub.disabled&&(s.extraData=s.extraData||{},s.extraData[n]=sub.value,"image"==sub.type&&(s.extraData[n+".x"]=form.clk_x,s.extraData[n+".y"]=form.clk_y)));var CLIENT_TIMEOUT_ABORT=1,SERVER_ABORT=2,csrf_token=$("meta[name=csrf-token]").attr("content"),csrf_param=$("meta[name=csrf-param]").attr("content");csrf_param&&csrf_token&&(s.extraData=s.extraData||{},s.extraData[csrf_param]=csrf_token),s.forceSync?doSubmit():setTimeout(doSubmit,10);var data,doc,callbackProcessed,domCheckCount=50,toXml=$.parseXML||function(s,doc){return window.ActiveXObject?(doc=new ActiveXObject("Microsoft.XMLDOM"),doc.async="false",doc.loadXML(s)):doc=(new DOMParser).parseFromString(s,"text/xml"),doc&&doc.documentElement&&"parsererror"!=doc.documentElement.nodeName?doc:null},parseJSON=$.parseJSON||function(s){return window.eval("("+s+")")},httpData=function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml="xml"===type||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;return xml&&"parsererror"===data.documentElement.nodeName&&$.error&&$.error("parsererror"),s&&s.dataFilter&&(data=s.dataFilter(data,type)),"string"==typeof data&&("json"===type||!type&&ct.indexOf("json")>=0?data=parseJSON(data):("script"===type||!type&&ct.indexOf("javascript")>=0)&&$.globalEval(data)),data};return deferred}if(!this.length)return log("ajaxSubmit: skipping submit process - no element selected"),this;var method,action,url,$form=this;"function"==typeof options?options={success:options}:void 0===options&&(options={}),method=options.type||this.attr2("method"),action=options.url||this.attr2("action"),url="string"==typeof action?$.trim(action):"",url=url||window.location.href||"",url&&(url=(url.match(/^([^#]+)/)||[])[1]),options=$.extend(!0,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},options);var veto={};if(this.trigger("form-pre-serialize",[this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(options.beforeSerialize&&options.beforeSerialize(this,options)===!1)return log("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var traditional=options.traditional;void 0===traditional&&(traditional=$.ajaxSettings.traditional);var qx,elements=[],a=this.formToArray(options.semantic,elements);if(options.data&&(options.extraData=options.data,qx=$.param(options.data,traditional)),options.beforeSubmit&&options.beforeSubmit(a,this,options)===!1)return log("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[a,this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=$.param(a,traditional);qx&&(q=q?q+"&"+qx:qx),"GET"==options.type.toUpperCase()?(options.url+=(options.url.indexOf("?")>=0?"&":"?")+q,options.data=null):options.data=q;var callbacks=[];if(options.resetForm&&callbacks.push(function(){$form.resetForm()}),options.clearForm&&callbacks.push(function(){$form.clearForm(options.includeHidden)}),!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?"replaceWith":"html";$(options.target)[fn](data).each(oldSuccess,arguments)})}else options.success&&callbacks.push(options.success);if(options.success=function(data,status,xhr){for(var context=options.context||this,i=0,max=callbacks.length;max>i;i++)callbacks[i].apply(context,[data,status,xhr||$form,$form])},options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form])}}if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form])}}var fileInputs=$("input[type=file]:enabled",this).filter(function(){return""!==$(this).val()}),hasFileInputs=fileInputs.length>0,mp="multipart/form-data",multipart=$form.attr("enctype")==mp||$form.attr("encoding")==mp,fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var jqxhr,shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;options.iframe!==!1&&(options.iframe||shouldUseFrame)?options.closeKeepAlive?$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a)}):jqxhr=fileUploadIframe(a):jqxhr=(hasFileInputs||multipart)&&fileAPI?fileUploadXhr(a):$.ajax(options),$form.removeData("jqxhr").data("jqxhr",jqxhr);for(var k=0;k<elements.length;k++)elements[k]=null;return this.trigger("form-submit-notify",[this,options]),this},$.fn.ajaxForm=function(options){if(options=options||{},options.delegation=options.delegation&&$.isFunction($.fn.on),!options.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!$.isReady&&o.s?(log("DOM not ready, queuing ajaxForm"),$(function(){$(o.s,o.c).ajaxForm(options)}),this):(log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)")),this)}return options.delegation?($(document).off("submit.form-plugin",this.selector,doAjaxSubmit).off("click.form-plugin",this.selector,captureSubmittingElement).on("submit.form-plugin",this.selector,options,doAjaxSubmit).on("click.form-plugin",this.selector,options,captureSubmittingElement),this):this.ajaxFormUnbind().bind("submit.form-plugin",options,doAjaxSubmit).bind("click.form-plugin",options,captureSubmittingElement)},$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},$.fn.formToArray=function(semantic,elements){var a=[];if(0===this.length)return a;var els2,form=this[0],formId=this.attr("id"),els=semantic?form.getElementsByTagName("*"):form.elements;if(els&&!/MSIE [678]/.test(navigator.userAgent)&&(els=$(els).get()),formId&&(els2=$(":input[form="+formId+"]").get(),els2.length&&(els=(els||[]).concat(els2))),!els||!els.length)return a;var i,j,n,v,el,max,jmax;for(i=0,max=els.length;max>i;i++)if(el=els[i],n=el.name,n&&!el.disabled)if(semantic&&form.clk&&"image"==el.type)form.clk==el&&(a.push({name:n,value:$(el).val(),type:el.type}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}));else if(v=$.fieldValue(el,!0),v&&v.constructor==Array)for(elements&&elements.push(el),j=0,jmax=v.length;jmax>j;j++)a.push({name:n,value:v[j]});else if(feature.fileapi&&"file"==el.type){elements&&elements.push(el);var files=el.files;if(files.length)for(j=0;j<files.length;j++)a.push({name:n,value:files[j],type:el.type});else a.push({name:n,value:"",type:el.type})}else null!==v&&"undefined"!=typeof v&&(elements&&elements.push(el),a.push({name:n,value:v,type:el.type,required:el.required}));if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name,n&&!input.disabled&&"image"==input.type&&(a.push({name:n,value:$input.val()}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}))}return a},$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))},$.fn.fieldSerialize=function(successful){var a=[];return this.each(function(){var n=this.name;if(n){var v=$.fieldValue(this,successful);if(v&&v.constructor==Array)for(var i=0,max=v.length;max>i;i++)a.push({name:n,value:v[i]});else null!==v&&"undefined"!=typeof v&&a.push({name:this.name,value:v})}}),$.param(a)},$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;max>i;i++){var el=this[i],v=$.fieldValue(el,successful);null===v||"undefined"==typeof v||v.constructor==Array&&!v.length||(v.constructor==Array?$.merge(val,v):val.push(v))}return val},$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(void 0===successful&&(successful=!0),successful&&(!n||el.disabled||"reset"==t||"button"==t||("checkbox"==t||"radio"==t)&&!el.checked||("submit"==t||"image"==t)&&el.form&&el.form.clk!=el||"select"==tag&&-1==el.selectedIndex))return null;if("select"==tag){var index=el.selectedIndex;if(0>index)return null;for(var a=[],ops=el.options,one="select-one"==t,max=one?index+1:ops.length,i=one?index:0;max>i;i++){var op=ops[i];if(op.selected){var v=op.value;if(v||(v=op.attributes&&op.attributes.value&&!op.attributes.value.specified?op.text:op.value),one)return v;a.push(v)}}return a}return $(el).val()},$.fn.clearForm=function(includeHidden){return this.each(function(){$("input,select,textarea",this).clearFields(includeHidden)})},$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();re.test(t)||"textarea"==tag?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==tag?this.selectedIndex=-1:"file"==t?/MSIE/.test(navigator.userAgent)?$(this).replaceWith($(this).clone(!0)):$(this).val(""):includeHidden&&(includeHidden===!0&&/hidden/.test(t)||"string"==typeof includeHidden&&$(this).is(includeHidden))&&(this.value="")})},$.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},$.fn.enable=function(b){return void 0===b&&(b=!0),this.each(function(){this.disabled=!b})},$.fn.selected=function(select){return void 0===select&&(select=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=select;else if("option"==this.tagName.toLowerCase()){var $sel=$(this).parent("select");select&&$sel[0]&&"select-one"==$sel[0].type&&$sel.find("option").selected(!1),this.selected=select}})},$.fn.ajaxSubmit.debug=!1}),$(function(){function getScrollbarWidth(){var outer=document.createElement("div");outer.style.visibility="hidden",outer.style.width="100px",outer.style.msOverflowStyle="scrollbar",document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%",outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;return outer.parentNode.removeChild(outer),widthNoScroll-widthWithScroll}function close_video_modal(){var $promo=$("#promo"),$video=$("#promo").find("video");$promo.removeClass("playing"),$("body").removeClass("video"),is_mobile&&$promo.find(".videoModal").hide(),$video.get(0).pause(),is_mobile&&$video.get(0).webkitExitFullscreen(),ga("send","event","video","stop","main-video")}function checkBar(){$(window).width()<=700||$header[$(window).scrollTop()>$header.height()+50?"addClass":"removeClass"]("fixed")}function checkForPurchaseVideoInsert(){var offset=$("#purchase").offset().top-$(window).scrollTop();if(offset<=window.innerHeight&&!is_mobile&&0==$("#purchase video").length){var poster=$("#purchase").attr("data-poster"),video='<video poster="'+poster+'" loop muted autoplay><source src="https://s3.amazonaws.com/soylent-files/Soylent-Loop-Glass-Room-H.264.mp4" type="video/mp4;"><source src="https://s3.amazonaws.com/soylent-files/Soylent-Loop-Glass-Room-H.264.webmhd.webm" type="video/webm;"></video>';$(video).prependTo("#purchase")}}var is_iphone=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i),is_ipad=navigator.userAgent.match(/iPad/i),is_android=navigator.userAgent.match(/Android/i),is_mobile=is_iphone||is_ipad||is_android;$("body").addClass(is_mobile?"mobile":"desktop"),is_mobile||$("[data-nutrient]").each(function(){var i=new Image;i.src=$(this).data("nutrient")});var navHeight=is_mobile?50:61;$(function(){$(".lifestyle.gallery").okgallery({random:!1,autoplay:!0,aspect:16/9,backgroundSize:"contain",backgroundPosition:"top left",backgroundRepeat:"no-repeat",dots:!0,dotsInside:!0,dotActiveClass:null,dotWidth:6,dotMargin:2,dotContainerPadding:0,dotColor:"#ffffff",dotShadowWidth:0,dotActiveColor:"rgba(105, 205, 60, 1)",resizeTime:0,delayTime:9e3,fadeTime:200,useKeyboard:!1,onchange:function(index){var productId=$($(".lifestyle.gallery > div").get(index)).data("product-id");$(".slideIn").removeClass("active"),$('.slideIn[data-product-id="'+productId+'"]').addClass("active")}})}),$(".lifestyle.gallery").click(function(){ga("send","event","addons","click","gallery")}),setTimeout(function(){"complete"===document.readyState?$("body").addClass("loaded"):$(window).load(function(){$("body").addClass("loaded")})},1e3),FastClick.attach(document.body),new WOW({mobile:!1}).init(),$(".contact-form").ajaxForm(function(){alert("Thanks! We'll get back to you shortly."),$(".contact-form input, .contact-form textarea").val("")});$("#promo"),$("#promo").find("video");$("#promo .text").click(function(){var $promo=$("#promo"),$video="";!is_mobile&&$promo.addClass("playing"),!is_mobile&&$("body").addClass("video"),is_mobile&&$promo.find(".videoModal").show();var html="\n		    <div class='close'>X</div>\n		    <video controls autoplay>\n				<source src='https://s3.amazonaws.com/soylent-files/Soylent-Web-1.mp4'  type='video/mp4;'>\n				<source src='https://s3.amazonaws.com/soylent-files/Soylent-Web-1.webmhd.webm' type='video/webm;'>\n            </video>";$promo.find(".videoModal").html("").html(html),$("#promo .videoModal video").click(function(e){e.stopPropagation()}),$("#promo .videoModal .close").click(function(){close_video_modal()}),$video=$("#promo").find("video"),$video.get(0).play(),is_mobile&&$video.get(0).webkitEnterFullscreen(),ga("send","event","video","start","main-video")}),$("#promo .videoModal").click(function(){close_video_modal()}),$(".scrollDown").click(function(){$("html, body").animate({scrollTop:$("#purchase").offset().top-navHeight},300)});var tmp,moleculeTimeout,$molecule=$("#molecule"),selected=!1,$incoming=$(".molecule .active"),$outgoing=$(".molecule .out");$("[data-nutrient]").click(function(){if(!$(this).hasClass("active")){$(this).parent().find(".active").removeClass("active"),$(this).addClass("active");var molecule=$(this).data("nutrient");ga("send","event","nutrient","stop",molecule),$molecule.attr("src","molecules/index.html#"+molecule),$(".nutrientAbout, .molecule").removeClass("active");var elem=$(".nutrientAbout > div").get(0);elem.offsetWidth=elem.offsetWidth,tmp=$incoming,$incoming=$outgoing,$outgoing=tmp,$incoming.hide().removeClass("out"),$outgoing.removeClass("active").addClass("out"),clearTimeout(moleculeTimeout),moleculeTimeout=setTimeout($.proxy(function(){$(".nutrientAbout > div").html($(this).data("info")),$incoming.css({backgroundImage:"url("+$(this).data("nutrient")+")"}),$incoming.show(),$(".nutrientAbout").addClass("active"),moleculeTimeout=setTimeout(function(){$incoming.addClass("active")},20)},this),100),selected||(selected=!0,$("html,body").animate({scrollTop:$("#learn .list").offset().top-navHeight}))}}),$(".nutrientAbout > div").html($("[data-nutrient]").first().data("info")),$(".molecule .active").css({backgroundImage:"url("+$("[data-nutrient]").first().data("nutrient")+")"});var $items=$("[data-item]"),$products=$(".product[data-product-id]");$items.click(function(){$items.removeAttr("data-active"),$(this).attr("data-active",!0),$products.removeAttr("data-active"),$products.filter('[data-product-id="'+$(this).data("product-id")+'"]').attr("data-active",!0)}),$productInfo=$('[data-role="productInfo"]'),$(".option[data-variant-id]").click(function(){$(".toggle").attr("data-selected",$(this).attr("data-type")),"once"===$(this).attr("data-type")?($('[data-role="buy"]').css({display:"inline-block"}),$('[data-role="subscribe"]').hide()):($('[data-role="subscribe"]').css({display:"inline-block"}),$('[data-role="buy"]').hide()),$productInfo.attr("data-type",$(this).attr("data-type"))});var $modal=$(".modal"),$paddingRight=$("body, #header");$(".modal .close").click(function(){$paddingRight.css({paddingRight:0}).removeClass("modalShowing"),window.location.hash="#/"}),$("#footer [data-key], #topLinks [data-key]").click(function(){return $modal.find("[data-modal]").hide(),$modal.find('[data-modal="'+$(this).attr("data-key")+'"]').show(),$paddingRight.css({paddingRight:getScrollbarWidth()}).addClass("modalShowing"),$("body").removeClass("sideMenuOpen"),window.location.hash=$(this).attr("data-key"),ga("send","event","navigation","click",$(this).attr("data-key")),!1}),$(window).on("hashchange",function(){$modal.find("[data-modal]").hide(),$paddingRight.css({paddingRight:0}).removeClass("modalShowing"),$modal.find('[data-modal="'+window.location.hash.substring(1)+'"]').length>0&&($modal.find('[data-modal="'+window.location.hash.substring(1)+'"]').show(),$paddingRight.css({paddingRight:getScrollbarWidth()}).addClass("modalShowing"),$("body").removeClass("sideMenuOpen"))});var current=window.location.hash.substring(1);current.length>0&&$modal.find('[data-modal="'+current+'"]').length>0&&($modal.find("[data-modal]").hide(),$modal.find('[data-modal="'+current+'"]').show(),$paddingRight.css({paddingRight:getScrollbarWidth()}).addClass("modalShowing"),$("body").removeClass("sideMenuOpen"));var $faqPanels=$('[data-modal="faq"] .accordion .answer').hide();$('[data-modal="faq"] .accordion .question').click(function(){var $this=$(this),$target=$this.next(".answer");return $target.hasClass("active")||($faqPanels.removeClass("active").slideUp(150),$target.addClass("active").slideDown(150),$('[data-modal="faq"] .accordion .question').removeClass("active"),$(this).addClass("active"),ga("send","event","faqs","click",$(this).text())),!1});$('[data-modal="prepare"] .accordion .answer').hide();$('[data-modal="prepare"] .accordion .question').click(function(){var $this=$(this),$target=$this.next(".answer");return $target.hasClass("active")||($faqPanels.removeClass("active").slideUp(150),$target.addClass("active").slideDown(150),$('[data-modal="prepare"] .accordion .question').removeClass("active"),$(this).addClass("active")),!1}),$(".menuToggle").click(function(){$("body").addClass("sideMenuOpen")}),$(".menuClose").click(function(){$("body").removeClass("sideMenuOpen")});var $header=$("#header");$("html, body").bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(){$("html, body").stop()}),$('[data-role="nav"] a').click(function(evt){var target=$(this.hash);0!==target.length&&(evt.preventDefault(),evt.stopPropagation(),$("body").removeClass("sideMenuOpen"),$paddingRight.css({paddingRight:0}).removeClass("modalShowing"),window.location.hash="#/",is_mobile?$("html,body").scrollTop(target.position().top-navHeight):$("html,body").animate({scrollTop:target.position().top-navHeight}))}),$(window).scroll(checkBar).resize(checkBar),checkBar(),$(document).keyup(function(e){27==e.keyCode&&($paddingRight.css({paddingRight:0}).removeClass("modalShowing"),window.location.hash="#/")});var emailRegex=new RegExp("[-0-9a-zA-Z.+_]+@[-0-9a-zA-Z.+_]+.[a-zA-Z]{2,4}");$("#form").submit(function(e){e.preventDefault();var email=$("#email_submit").val();if(!email.match(emailRegex))return void alert("Not a real email address..");var data={};data["entry.2102754136"]=email,data.submit="Submit",$.get("https://docs.google.com/forms/d/1WPOa8paRqfm8k8-E9F-5HMJDZVbMhFUHN0acva7q5iE/formResponse",data),$("#fields").hide(),$("#thanks").show()}),$(window).scroll(checkForPurchaseVideoInsert).resize(checkForPurchaseVideoInsert),checkBar()}),jQuery(function($){$("html").removeClass("no-js"),$("[placeholder]").each(function(){if(""===$(this).val()){var hint=$(this).attr("placeholder");$(this).val(hint).addClass("hint")}}),$("[placeholder]").focus(function(){$(this).val()===$(this).attr("placeholder")&&$(this).val("").removeClass("hint")}).blur(function(){""===$(this).val()&&$(this).val($(this).attr("placeholder")).addClass("hint")}),$("input.error, textarea.error").focus(function(){$(this).removeClass("error")}),$("form :submit").click(function(){return $(this).parents("form").find("input.hint, textarea.hint").each(function(){$(this).val("").removeClass("hint")}),!0})});